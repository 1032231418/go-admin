language: go
sudo: false

go:
  - 1.12.x

services:
  - mysql

before_install:
  - mysql -e 'create database `go-admin-test`;'

before_script:
  - echo "USE mysql;\nUPDATE user SET authentication_string=PASSWORD('root') WHERE user='root';\nFLUSH PRIVILEGES;\n" | mysql -u root
  - mkdir -p /home/travis/gopath/src/github.com/chenhg5
  - git clone https://github.com/chenhg5/go-admin.git  /home/travis/gopath/src/github.com/chenhg5/go-admin

script:
  - cd /home/travis/gopath/src/github.com/chenhg5/go-admin && make deps
  - make test
